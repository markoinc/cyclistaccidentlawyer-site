# Vapi AI Appointment Setter To GoHighLevel Outbound w Make.com 2024
# Video: https://www.youtube.com/watch?v=kwT07RiI9O0
# Category: ghl-chatbot

in this video I'm going to go over the
easiest way to connect vapi and go level
and have your VAP agent call your goh
Lev leads I'm gonna let this run once
okay one sec I'm trying I'm trying to
talk with my subscribers I'm trying to
talk with my subscribers can you give me
a sec I like your accent by the way
thank you I appreciate the compliment
could you please provide the date and
time you would like to book the call and
book an appointment with them so what
happened recently with go level is that
we had version one connection version
one API connection API means connection
with platforms for example go high level
and Ving and then goad level change to a
version 2 API connection now in the
meantime what happened is that we had to
go through Marketplace it's called goh
level Marketplace create an nap there
and then connect your V agent through
make.com with go level now we don't need
to do that anymore and I'll show you
exactly how to set that up from inside
your go level account so that you don't
have to create like a Nab in go level
Marketplace and it's going to be way
easier and way simpler so let's dive in
the video so I just want to preface this
video with saying that I have sh already
a full tutorial over the two systems
that I'm going to go over today this is
system number one and this is system
number two so system number one is for
the outbound call to be initiated from
vapi so that when a lead goes through
your goal account or your goal workflow
one of the go high Lev workflows then
this specific scenario is allowing the
call to be initiated to the lead so this
is scenario number one and scenario
number two and scenario number two is
basically the scenario that when the
lead wants to book an appointment at a
specific time the agent can do it by
itself without having to send uh a
booking link or something like that okay
now actually I think it's going to be a
good idea to set up a system which is
going to be I think an extension of this
system I can kind of like imagine it now
but I'm going to set it up and I'm going
to show it in another video so that when
something goes wrong for whatever reason
with this appointment booking process
then the agent can send a text from your
go level phone number to that lead so
that the lead can uh book an appointment
by himself or herself so if you want to
see a full breakdown of these two
scenarios check out the other video that
I have on my YouTube channel about how
to connect vapi with goai level in this
video I'm going to go over them briefly
and specifically I'm going to go over
the modules that are different we have
two modules that are different from the
initial scenario and by the way if you
want access to these two scenarios for
free join my school community Community
First Link in the description below and
you're going to find them over there so
let's dive in the video so the way to
set up the version two API connection
from inside your go level account
without having to go through the
marketplace as we had to uh do a few
weeks ago is first of all you have to
specify the exact uh sub account that
you want to set up this VAP agent with
and then you go to
settings and then you scroll down and
then you see over here uh private
integration so you click on that and
then as you can see here it says private
Integrations API version two and if you
go to go high levels documentation and
scroll down to uh create appointment
over here at calendar events then you
click on that on this little drop down
and you can see here it says use the
access token generated blah blah blah or
private integration token of sub account
so this is what we're going to do and
yeah you basically click on create new
integration you give it a name for
example
vapy
um and
make.com
connection and then you click on next
now Scopes Scopes is the amount of
access that you give to a specific
application to do something okay so in
this case we're going to give a specific
amount of axess or specific scopes to
vapy through the the token the string of
characters token is basically a string
of characters that you're going to see
over here uh to make.com so that vapy
agent through make.com can book an
appointment or do other stuff okay so
you're going to click on select Scopes
so now for an appointment setter Bo what
you're going to need is view calendars
edit calendars view calendar events and
edit calendar events you don't need
anything else there are a lot of other
Scopes um for other things right like
you can do other things like like a
bunch of stuff as you can see here but
we don't need any other thing uh other
than these for Scopes so you click on
create cool and then you have your API
token um I don't care about this token
because I'm going to delete it
afterwards but what I would suggest you
do is you take this token you copy it
and then you put it in a secure folder
let's say in your Google drive or
something like that uh yeah so you
basically copy that you click on this
little x uh button over here and then
you have access token over here cool
what I would suggest is you paste it in
a Google doc like this cool so now we
have the access token from inside go
high level sub account so we're done
with that okay so next thing that you
need to set up is a vapy agent this is a
very simple agent for this purpose and
as you can see the system prompt that
that I have over here is if the user
wants to book a call ask them what time
and day they would like to book a call
then run the DHL booking tool okay DHL
stands for gooh high level yeah you can
just take a look uh over here and the
different things that I say and also you
need to set up a specific tool which is
going to be the DHL booking tool tools
in V are basically things that do very
specific functions and in this case this
tool is going to allow the VAP agent to
book an appointment with that lead that
it's calling straight into the go level
calendar so I'll show you how to create
this tool so that your VAP agent can
book the appointment so we go to uh new
tool over here then you're going to
click on make because we're going to run
this tool with make then what you're
going to do is you're going to set up
your web hook okay you're going to have
to set up your web hook so that it has a
very specific um address over here then
you're going to copy the address to your
clipboard then what you're going to do
is you're going to go to vapy and you're
going to paste the web hook URL over
here then you click on Save and then you
click on next cool then property name
the property is basically something that
you want the tool or the agent to
capture at that time okay the only thing
that we need this agent to capture is
the time and date that the person wants
to book an appointment for so the
property name is going to be appointment
time and then you're going to have to
describe the property its purpose it's
used so that the agent will know when to
use it or actually uh so that vapi
triggers it at that specific time that
let's say the person says yes I want to
book an appointment I would suggest you
write exactly what you see on the screen
over here uh over here because actually
had a call with a person that the only
thing that was preventing him from uh
the tool being run correctly was this
specific phrase okay he was using like a
similar phrase but for whatever reason
um the web Hook was not getting
triggered with that phrase now web Hook
is this little thingy and this one and
this one which basically what it does is
it gets triggered and then it triggers a
BNS of other stuff okay or it gets
triggered by itself and then something
happens
uh now web hooks exist in different
platforms for example we have a web hook
in go level we have a web hook in
make.com and in many platforms so that
they can send signals to each other and
then they can trigger each other so that
actions can happen throughout platforms
okay I know that we have uh Advanced
people that watches videos but I want to
explain this stuff because I know that
me explaining these different terms make
the videos easier to watch so let's
let's go back to
vapi anyway so I would suggest use
exactly this phrase so that the web hook
can be triggered correctly okay cool
then you click on Save and then you
click on next now if you wanted more
things to go through the web hook uh you
would click on properties over here and
you would add another property but we
don't want anything else to go through
the web hook we have every other
information that we need so we are good
with that then you would click on next
and then you're going to name the tool
and you're going to have a description
for the tool the tool can be called ghl
booking and then the description is
going to be the person you're talking
with wants to book an appointment then
you click on create I'm not going to do
that because I have already done it so
I'm going to close it here cool and I
have this uh specific tool over here
cool so after you have that the only
things that you will need are these two
make scenarios and one scenario in go
high level so that the lead can get
through this specific scenario or
workflow is basically the same thing uh
and then it can go through the web hook
and this web hook will trigger the first
call which is this one and then the
second web Hook is going to be triggered
by this tool so we have two different
web hooks or actually we have three web
hooks but we have two different
connections okay the first scenario to
initiate the call will happen with go
level and the second second scenario is
going to happen to uh to book the
appointment is going to happen through
vapi Okay cool so now I'm going to go
over these scenarios kind of briefly to
show you the different components of it
and how they are made again for a more
indepth explanation of the scenarios go
uh go and watch my first video on vapi
that I have on my channel so again this
is just a regular web hook that you
connected with this specific web hook
over here so what you do is you create
this web hook and then you uh click on
copy address to
clipboard okay and then uh you create a
goal scenario with a web hook over here
and what you need to do is basically you
paste the URL from this web hook the
method is going to be post post means
send then there is another method which
is get that you receive something you
receive information or something else
okay now what we want to do is we want
to have the lead from go level go
through this and then send post right
we're going to send the data to this web
hook so that the call can be initiated
so after the lead goes through this
workflow and then arrives over here we
have an HTP module so what HTTP does is
we have connections over the internet
you can just think of it like that that
are not predetermined in a platform for
example we have uh if we go over here we
have a connection with open AI over here
right so that is
predetermined um yeah I don't see any
other connection over here but we have
in this case we have connections with
openi you can have connections with
Facebook you can have connections with
uh many different platforms over the
internet but when you don't have a
predetermined Connection in for example
make.com or zappier or in other
platforms uh that are automations
automations platforms then sometimes
what exists is called the API
documentation okay so in this case for
example go level has the API
documentation API is for connecting
platforms and then we have the
documentation here so that people can do
their own custom actions like you can
see over here you can do so many actions
for so many uh different things for
invoices for I don't know like different
things that you see over here now what
we're going to focus on in this video is
going to be just create an appointment
actually two things create an
appointment and then get free slots I'll
show you why and I'll show you how so
when we have these API documentations
then you can use the HTTP
module uh to make these custom actions
so over here the HTTP is going to be
just to make a request the method's
going to be post we're going to send
something what we're going to send is
the data from the lead from the go have
a lead to VAP you're going to have to
use this specific URL so that VAP calls
the lead this is what we need we're
going to have to have two headers um the
first header is going to have a name
authorization then the value is going to
be Bearer one space and then your API
key from vapi okay so how you find that
is you go down here you click on API
keys and then you basically arrive at
this page you're going to copy it
and then you're GNA have to um paste it
over here okay so uh the value is Bearer
and then API key Bearer is a word that
means that the person Bears or holds
that key so basically we authorize a
specific action with VAP in this case so
somebody that would not bear or hold
that key could not initiate a call with
your account okay cool then uh the
second item over here or the second
header uh it's going to be content type
value is going to be application Json
exactly what you see over here uh Json
is basically this code over here that
you see okay it's a a structure of a
code and this is exactly what it is that
specify something so in this case we
specify which assistant will call that
person we specify which phone number is
going to use and then we specify for the
customer uh the phone number of the
customer and the name of the customer
okay so now assistant ID you're going to
have to go to
assistants then you're going toh click
on copy assistant ID and then this is
basically your assistant ID okay make
sure that you use the correct assistant
to call that
person and then for the phone number ID
you go to your phone numbers and then uh
we have this ID this is basically the
phone number ID you would have to uh
click on uh this little button over here
and then you're going to copy it
and then you basically go over here and
you paste it here okay cool and this is
basically it so now for data store
you're going to have to create a data
store that has two different fields one
field is going to be contact ID from the
web Hook and the other one is going to
be phone number okay and it's going to
be again the phone number of the lead so
how you do that again is you go to add
and you create a data store all right so
I'm not going to go over it in this
video have already gone over it in the
previous video go and watch that video
and then let's go to the next scenario
and basically over here what we do is we
have a custom web hook that gets
triggered when the person on the call
says I want to book an appointment for
let's say uh tomorrow at 2 p.m. all
right then we have a data
store that finds the phone number of
that person from the store phone number
that we created in
make.com and then uh yeah basically this
is what it does then the next one is get
a record data store and over here you
have to click on key all right I have
seen different people even in my private
school Community join my school
Community down below first link that had
the problem of this scenario not
operating correctly because they had um
basically contact ID here okay if you
have that is not going to work you need
to click on the key cool then you click
on okay next one is um chbt module it's
a very simple one basically you use gbd4
or whatever model you want to use I like
using gp40 and then we have two
different prompts the first prompt is
the systems prompt which basically what
it does is let's say that the lead on
the call says I want to book an
appointment for tomorrow at 2 p.m. then
chpt takes that phrase tomorrow at 2
p.m. or or uh let's say Friday 2 p.m
because vapi doesn't have an innate uh
calendar okay so VAP literally doesn't
know what time it is or what year it is
so what this does is it takes that
phrase and it formats that phrase in an
actual time that is acceptable from goai
Level uh for an appointment to be booked
okay so again if you want the uh The
Prompt uh and everything over here
School Community First Link in the
description below and then we have a
user message and then over here the
message content is only tool call list
function
arguments and uh an appointment time
over here you click on appointment time
okay now we come to the module which is
different uh in this scenario so in the
previous scenario I showed you the
module which
was HP make an oo 2.0 request okay oo
means open authorization it basically
means the secure connection between
platforms that doesn't require that
other platform to know your login
details if we go with that you need to
create a connection and then you need to
create that connection through go high
level Marketplace okay now we don't need
that what we need is make a basic
authorization request okay we don't need
a 2.0 request because we already have
the 2.0 API key uh again API is
connection between platform forms we
have that key created in go high level
okay so again if you didn't have this
module over here you would go to add a
module HTTP and it would be a make a
basic authorization request Okay cool so
now after you have this
module what you need the URL is going to
be this URL that you see over here
method is going to be post because we're
going to have to send the data to go
level calendar so that we book an
appointment and um yeah version is going
to be this one because this is the only
acceptable version over here as you can
see it's this date over here and
authorization you will need to have your
API key that you just created okay so in
this case this is my API key so you
would take that you would copy that then
you would create another header that
says authorization the name is
authorization and the value is beer in
this specific uh API okay then body type
is going to be raw content type is going
to be Json and over here you will need
to specify the calendar ID like which
calendar we're going to go ahead and
book this appointment on then location
ID which is basically the sub account
the goad Lev sub account for example in
this case we have this sub account right
cool and then we have the contact ID
which is the ID of that lead in go high
level okay and then we have start time
which is the start time of the
appointment like what time we want to
book the appointment for cool so Cal ID
for Cal ID you have to go to your sub
account then you would go to um calendar
settings and you would have your
different calendars here and then you
would click on this little icon over
here this is the ID so you copy that you
go to make.com then you drop it here uh
inside the quotation marks then location
ID is this this is the location ID and
then you would drop it here contact ID
is going to be the ID from uh from the
third step over here then start time is
going to be the result from the last
module over
here and then you would have to
specify the exact time and then you
would have to specify your own time zone
okay so you would have to write here
based on GMT time your time zone for
example example for me I'm mean GMT plus
2 I just set up another account
yesterday that was GMT uh minus 7 okay
because that was in I think California
so basically this is what you do then
you click on
okay cool and then we have the router in
which case the upper part of the
scenario will book the appointment and
if the appointment slot is not available
then it's going to go down here and then
we're going to get the available slots
and the agent is going to say sorry uh 3
P.M for example is not available
tomorrow but we have let's say 2 p.m and
4 p.m. cool so over here you have to set
up two different
filters uh if the appointment is booked
status code is going to be equal to
2011 uh status code from this module
over here so what this means is that the
appointment was created if status code
is 2011 so there are different status
codes for example status code 200 means
success that something was a success
status code 2011 means success and that
something was created it was not only
successful but something was created in
this case an appointment for example
status code 400 means that something was
wrong or wrongly configured Okay cool so
if status code is
2001 then we go up here to this specific
web hook this is not going to work for
uh whatever
reason um so let's go to function
arguments oppon time perfect so you need
to specify the tool call ID which was
the tool that we called with that agent
uh which was the um ghl ghl booking
tool it's this one this is the tool ID
uh but actually you will not need to um
to copy that because we also have the
tool
ID um over here so you'd have to click
on that actually you would have to click
exactly this and then the result is
going to be perfect your appointment is
booked for uh that specific time that
the person said for example if uh the
person says I want to book an
appointment for tomorrow at 3 pm then
the agent is going to say perfect your
appointment is booked for 3 p.m. when it
books the actual appointment now if that
slot is no longer available what's going
to happen is that the the output like
the result from this step over here that
goes ahead and books an appointment uh
is going to say slot no longer available
okay in its data so if data contains
case
insensitive actually no or no longer
it's not it's it's not going to work if
you just say not for whatever reason had
not there but it's actually no or no
longer so if it says no longer available
it's going to go down here and this is
like alien language over here right we
have like two different fields that it
formats the time that the person says
that they want to book an appointment
for or actually formats the date so for
example the lead says I want to book an
appointment for tomorrow at 2m and let's
say tomorrow is
Friday um okay so let's say tomorrow is
Wednesday 18th of September so it takes
that day 18th of September and basically
the first thing here the first variable
formats that day
Wednesday uh like the very beginning of
Wednesday which is 12 a.m. exactly like
the very very beginning of Wednesday and
then we have the end time a millisecond
before the end of Wednesday so it's
literally like
11:59 999 okay like just before
Wednesday ends so that we can take that
time like those two different time
frames right like that the beginning and
the end and then we can put it here in
this
module which this is the SLE module
which is different by the way um which
is again a make a basic authorization
request and basically what we do is we
take these two different times and then
we say you have to use this specific
URL and you basically say get me the
free slots in this
calendar for the whole of Wednesday like
from the very beginning of Wednesday to
the very end of Wednesday get me uh the
free slots uh from that calendar and the
time zone for time zone you will have to
go to your go level account you would
have to go to business profile and then
you would have to go to time zone over
here and you you see that the time Zone
says for example GMT plus 2 Europe
Madrid CEST okay so what you need to do
is you need to take Europe Madrid and
nothing else because again if we go to
uh go level
documentation oh yeah and then we go to
get free
slots uh then we're going to see that
the time zone
is written just like that okay for
example America
chihuaha I thought that was a dog but
you basically take America plus whatever
or uh the time zone exactly as it says
here so in this case it would be Europe
SL Madrid and nothing else before or
after Okay cool so we go back to
make.com and then start date is going to
be start time from the last step and an
end date is going to be end time from
the last step okay version is going to
be same
and authorization you would have to put
beer and then your API key okay cool we
click on
okay and then for the uh for the T
module over here I say basically you'll
receive some data which will be the
available time SS in that day for
booking an appointment you'll also
receive some data on when the person
want to book on when the person wanted
to book the appointment for uh
okay cool cool fine so basically what
yeah this is another prompt we're going
to find it in my school community and
what we do here is we give TBT the free
slots the free appointment slots and
when the person want to book an
appointment for that is no longer
available okay um cool so not available
slot is going to be
um again function arguments oppon time
and available time slots is going to be
this one that says
data and then there is going to be a web
hook response in the end that says uh
basically uh we specifying the tool call
ID which is the go high level booking
tool and the result which is uh in this
case is going to be uh hey um these
slots are no longer available or this
slot is no longer available but we have
let's say 2 pm and 3:30 p.m. when do you
want to book so yeah this is basically
how it works let's try it out right now
and see that it works properly so what
I'm going to do is I'm going to let this
run
once and then let this run
once cool and then I'm GNA take myself
through this web hook so that VAP agent
can call me so test
workflow cool run test and I should be
receiving a call on over
here here we
go
hello today hi how's it
going hello I'm doing well thank you how
can I assist you today are you looking
to book a call or exactly I'd love to
book a call Great could you please let
me know the date and time you like to
book the call I like your accent by the
way thank you I appreciate the
compliment could you please provide the
date and time you would like to book the
call yes uh how
about uh let me see let me see let me
just check let me just check my calendar
so that I see my availability
okay sure take your time let me know
once you've checked your calendar and
have a date and timeing
mind
sir uh yeah sure sure sure
so uh okay are you there are you there
yes I'm here just let me know the date
and time you'd like to book the call
yeah what about tomorrow at 300
[Music]
p.m this will just take a
sec it seems that the slot for tomorrow
at 300 p.m. is unavailable here are two
alternative times that are close to your
requested time tomorrow at 2 p.m.
tomorrow at 4 p.m. would either of these
times work for
you yeah give me a sec give me a
sec sure take your time let me know
which time works for you was wrong
talking um
great okay one second I'm trying I'm
trying to talk with my subscribers I'm
trying to talk with my sub subscribers
can you give me a
sec of course take your time just let me
know when you're ready to choose an
alternative time for the call so I had
two different API tokens from different
uh sub accounts and I had put the wrong
one here okay so you will only have one
API token and then uh just put the
correct one here all right let's try
this again I messed it up because I had
different API um
tokens from two different sub accounts
and it didn't work
obviously
so what's up
Danny D hello how's it going
Danny hello I'm doing well thank you how
can I assist you today I'd like to book
an
app sure I'd be happy to help you with
that could you please let me know the
date and time you'd like to book the
appointment for yes I'd like to book an
appointment for tomorrow at 300
p.m hold on a
sec unfortunately the slot for tomorrow
at 3:00 p.m. is not available how about
tomorrow at 2:30 p.m. or 3:30
p.m.
um yeah let's let's go for 2:30 tomorrow
at 2:30
p.m. this will just take a
sec your appointment is confirmed for
tomorrow at 2:30 p.m. see you then all
right Dany
thanks you're welcome have a great day
and see you tomorrow at 2:30 p.m. you
too all right so basically this is how
it works you can tweak your agent to do
different things but this is I think the
best scenario to book calls with and to
book appointments with in go level again
if you want access to these two
different scenarios which are the
updated scenarios join my school
Community First Link in the description
below one thing that I didn't say uh for
the the two new modules over here is
that you will have to have a connection
here uh which you can literally you
don't need any username you don't need
any password you just name your
connection and you click on create uh
and yeah this is pretty much it so guys
hopefully you like this video hopefully
you found it valuable educational if you
did subscribe to this Channel and then
I'll see you in one of the next videos